<!doctype html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8">
<title>ğŸ” Ø§Ù„Ø­Ø§Ø³Ø¨Ø© Ø§Ù„Ø°ÙƒÙŠØ© Ù„Ù„Ø±Ø³Ù… Ø§Ù„ÙƒÙ…Ø±ÙƒÙŠ</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
</head>
<body>
<h1>ğŸ” Ø§Ù„Ø­Ø§Ø³Ø¨Ø© Ø§Ù„Ø°ÙƒÙŠØ©</h1>

<label>Ø§Ø¨Ø­Ø« Ø¨Ø§Ù„Ø§Ø³Ù… Ø£Ùˆ IDE</label>
<input id="q">

<label>âš–ï¸ Ø§Ù„ÙˆØ²Ù† Ø§Ù„ÙƒÙ„ÙŠ (ÙƒØº)</label>
<input id="w" type="number">

<label>ğŸ’µ Ø§Ù„Ø±Ø³Ù… Ø§Ù„Ù…Ø¯ÙÙˆØ¹ Ø¨Ø¥Ø¨Ø±Ø§Ù‡ÙŠÙ… Ø®Ù„ÙŠÙ„ (USD)</label>
<input id="paid" type="number">

<label>ğŸ’° Ù‚ÙŠÙ…Ø© Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯ (GDS_YER)</label>
<input id="yer" type="number">

<label>ğŸ”¢ Ø³Ø¹Ø± Ø§Ù„ØµØ±Ù (Ø¯ÙŠÙ†Ø§Ø±/Ø¯ÙˆÙ„Ø§Ø±)</label>
<input id="ex" type="number" value="1320">

<label>ğŸ·ï¸ Ø§Ù„Ù†Ø³Ø¨Ø© (%)</label>
<input id="rt" type="number" value="6">

<button onclick="calc()">Ø§Ø­Ø³Ø¨</button>
<div id="out"></div>

<script>
let DB=[], current=null;
const $=s=>document.querySelector(s);

function findOne(q){
  q=q.toLowerCase();
  return DB.find(r=>r.product.toLowerCase().includes(q)||(r.IDE||"").toLowerCase().includes(q));
}

function calc(){
  const w=+$("#w").value;
  const paid=+$("#paid").value;
  const yer=+$("#yer").value;
  const ex=+$("#ex").value;
  const rt=+$("#rt").value;

  const A = w * yer * (rt/100);
  const B = paid;
  const AB = A - B;
  const finalIQD = AB * ex;

  $("#out").innerHTML=`
    <p>ğŸ·ï¸ Ø§Ù„Ù…Ù†ØªØ¬: ${current?current.product:$("#q").value}</p>
    <p>IDE: ${current?current.IDE:"-"}</p>
    <p>A = ${A.toFixed(2)} USD</p>
    <p>B = ${B.toFixed(2)} USD</p>
    <p>AB = ${AB.toFixed(2)} USD</p>
    <p><b>âœ… Ø§Ù„Ø±Ø³Ù… Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ: ${finalIQD.toFixed(2)} Ø¯ÙŠÙ†Ø§Ø±</b></p>`;
}

(async()=>{
  try{
    const res=await fetch("products.json");
    DB=await res.json();
  }catch{}
  const p=new URLSearchParams(location.search);
  const q=p.get("name")||p.get("ide");
  if(q){$("#q").value=q; current=findOne(q); if(current){$("#yer").value=current.GDS_YER;}}
})();
</script>
</body>
</html>
