<!doctype html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8">
<title>ðŸ“Š Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<style>
  body{font-family:"Segoe UI","Noto Naskh Arabic",sans-serif;background:#0f172a;color:#e5e7eb;margin:0;padding:20px}
  h1{text-align:center;color:#60a5fa}
  input{width:100%;padding:10px;margin:12px 0;border-radius:8px;border:1px solid #334155;background:#1e293b;color:#e5e7eb}
  table{width:100%;border-collapse:collapse;margin-top:10px}
  th,td{padding:10px;border-bottom:1px solid #334155;text-align:center}
  th{background:#1e293b;color:#93c5fd}
  tr:nth-child(even){background:#111827}
  a{color:#93c5fd;text-decoration:none}
  a:hover{text-decoration:underline}
  button{padding:6px 10px;margin-left:6px;border:none;border-radius:6px;background:#2563eb;color:white;cursor:pointer}
  button:hover{background:#3b82f6}
</style>
</head>
<body>
<h1>ðŸ“Š Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</h1>
<input id="q" placeholder="Ø§Ø¨Ø­Ø« Ø¨Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬ Ø£Ùˆ IDE ..." oninput="filter()">
<table>
  <thead><tr><th>Ø§Ù„Ù…Ù†ØªØ¬</th><th>IDE</th><th>GDS_YER</th></tr></thead>
  <tbody id="tb"></tbody>
</table>

<script>
let DB=[],VIEW=[];
const $=s=>document.querySelector(s);

function render(){
  const tb=$("#tb"); tb.innerHTML="";
  VIEW.forEach(r=>{
    const tr=document.createElement("tr");
    tr.innerHTML=`
      <td>
        <!-- Ø±Ø§Ø¨Ø· Ø¨Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬ ÙŠÙØªØ­ Ø§Ù„Ø­Ø§Ø³Ø¨Ø© Ù…Ø¹ ?name -->
        <a href="product-search.html?name=${encodeURIComponent(r.product)}" target="_blank">${r.product}</a>
        <!-- Ø²Ø± IDE ÙŠÙØªØ­ Ø§Ù„Ø­Ø§Ø³Ø¨Ø© Ù…Ø¹ ?ide -->
        <button onclick="openIDE('${r.IDE||''}')">ðŸ”— IDE</button>
      </td>
      <td>${r.IDE||"-"}</td>
      <td>${r.GDS_YER}</td>`;
    tb.appendChild(tr);
  });
}

function filter(){
  const q=$("#q").value.toLowerCase();
  VIEW=DB.filter(r=>r.product.toLowerCase().includes(q)||(r.IDE||"").toLowerCase().includes(q));
  render();
}

function openIDE(ide){
  if(!ide){alert("Ù…Ø§ÙƒÙˆ IDE");return;}
  window.open("product-search.html?ide="+encodeURIComponent(ide),"_blank");
}

// ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† JSON
fetch("products.json").then(r=>r.json()).then(js=>{
  DB=js; VIEW=DB; render();
});
</script>
</body>
</html>
