<!doctype html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8">
<title>ðŸ“Š Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<style>
body{font-family:"Segoe UI","Noto Naskh Arabic",sans-serif;background:#0f172a;color:#e5e7eb;margin:0;padding:20px}
h1{text-align:center;color:#60a5fa}
input{width:100%;padding:10px;margin:10px 0;border-radius:8px;border:1px solid #334155;background:#1e293b;color:#e5e7eb}
table{width:100%;border-collapse:collapse;margin-top:10px}
th,td{padding:10px;border-bottom:1px solid #334155;text-align:center}
th{background:#1e293b;color:#93c5fd}
tr:nth-child(even){background:#111827}
a{color:#93c5fd;text-decoration:none}
a:hover{text-decoration:underline}
button{padding:4px 8px;margin-left:4px;border:none;border-radius:6px;background:#2563eb;color:white;cursor:pointer}
button:hover{background:#3b82f6}
</style>
</head>
<body>
<h1>ðŸ“Š Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</h1>
<input id="q" placeholder="Ø§Ø¨Ø­Ø« Ø¨Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬ Ø£Ùˆ IDE ..." oninput="filter()">
<table>
<thead><tr><th>Ø§Ù„Ù…Ù†ØªØ¬</th><th>IDE</th><th>GDS_MIN</th><th>GDS_MAX</th><th>GDS_YER</th></tr></thead>
<tbody id="tb"></tbody></table>

<script>
let DB=[],VIEW=[];
const $=s=>document.querySelector(s);
function fmt(x){const n=Number(x);return isFinite(n)?n.toLocaleString('ar-IQ',{maximumFractionDigits:2}):'-';}
function prep(arr){return arr.map(r=>({product:r.product||r.GDS_DS2,IDE:r.IDE_HSC_NB1||r.IDE,GDS_MIN:+r.GDS_MIN,GDS_MAX:+r.GDS_MAX,GDS_YER:r.GDS_YER?+r.GDS_YER:(+r.GDS_MIN+ +r.GDS_MAX)/2})).filter(r=>r.product);}
function render(){
  const tb=$("#tb");tb.innerHTML="";
  VIEW.forEach(r=>{
    const tr=document.createElement('tr');
    tr.innerHTML=`
      <td>
        <a href="product-search.html?name=${encodeURIComponent(r.product)}" target="_blank">${r.product}</a>
        <button onclick="openIDE('${r.IDE||''}')">ðŸ”— IDE</button>
      </td>
      <td>${r.IDE||"-"}</td>
      <td>${fmt(r.GDS_MIN)}</td>
      <td>${fmt(r.GDS_MAX)}</td>
      <td>${fmt(r.GDS_YER)}</td>`;
    tb.appendChild(tr);
  });
}
function filter(){const q=$("#q").value.toLowerCase();VIEW=DB.filter(r=>r.product.toLowerCase().includes(q)||(r.IDE||'').toLowerCase().includes(q));render();}
function openIDE(ide){if(!ide){alert("Ù…Ø§ÙƒÙˆ IDE");return;}window.open("product-search.html?ide="+encodeURIComponent(ide),"_blank");}
fetch('products.json').then(r=>r.json()).then(js=>{DB=prep(js);VIEW=DB;render();});
</script>
</body>
</html>
